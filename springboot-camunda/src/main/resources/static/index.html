<!DOCTYPE html>
<html>
<head>
    <title>Camunda Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <h1>Camunda Form</h1>
    <form id="camundaForm">
        <div id="formFields"></div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
</div>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.4.0/dist/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        // Fetch Camunda form data
        $.get('http://localhost:8090/camunda/process-form/payment:1:ba47045c-ec02-11ee-9dc0-00c585057136', function(data) {
            var formFields = $('#formFields');
            data.fields.forEach(function(field) {
                var formGroup = $('<div class="mb-3"></div>');
                var label = $('<label class="form-label">' + field.label + '</label>');
                var input = $('<input class="form-control" id="' + field.id + '" name="' + field.id + '" type="' + field.type + '">');
                formGroup.append(label, input);
                formFields.append(formGroup);
            });
        });

        // Submit form
        $('#camundaForm').submit(function(event) {
            event.preventDefault();
            var formData = {};
            $(this).serializeArray().forEach(function(item) {
                formData[item.name] = item.value;
            });
            $.post('http://localhost:8090/submit-form', formData, function(response) {
                alert('Form submitted successfully');
            }).fail(function(error) {
                alert('Failed to submit form');
            });
        });
    });
</script>
</body>
</html>
